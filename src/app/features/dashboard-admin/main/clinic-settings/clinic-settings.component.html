<div class="page-container">
  <header class="page-header">
    <div class="header-left">
      <h1>Clinic Settings</h1>
      <p class="subtitle">Manage clinic identifiers and core configuration.</p>
    </div>
    <div class="header-right">
      <span class="env-badge">Production</span>
    </div>
  </header>

  <div class="settings-grid">

    <!-- Clinic Name Card -->
    <mat-card class="card full-width">
      <div class="card-header">
        <h2>Clinic Name</h2>
        <span class="descriptor">Displayed across your dashboard, PDFs, and communications.</span>
      </div>

      <div class="npi-bar">
        <div class="input-bar">
          <span class="input-icon"><mat-icon>business</mat-icon></span>
          <input type="text" [(ngModel)]="clinicName" placeholder="Enter clinic name..." aria-label="Clinic name" />
        </div>

        <button class="primary-btn" (click)="saveClinicName()" [disabled]="savingName || !clinicName"
          aria-label="Save clinic name">
          <mat-icon *ngIf="!savingName">save</mat-icon>
          <mat-icon *ngIf="savingName">hourglass_empty</mat-icon>
          <span>{{ savingName ? 'Saving…' : 'Save Name' }}</span>
        </button>
      </div>

      <div *ngIf="nameSaveSuccess" class="success-banner">
        <mat-icon>check_circle</mat-icon>
        Clinic name updated successfully.
      </div>
    </mat-card>

    <!-- Existing NPI Card -->
    <mat-card class="card npi-card full-width">
      <div class="card-header">
        <h2>National Provider Identifier</h2>
        <span class="descriptor">Your clinic’s unique identifier used across claims.</span>
      </div>

      <div class="npi-bar">
        <div class="input-bar">
          <span class="input-icon"><mat-icon>badge</mat-icon></span>
          <input type="text" [(ngModel)]="npi" maxlength="10" placeholder="Enter 10-digit NPI..."
            aria-label="NPI number" />
        </div>

        <button class="primary-btn" (click)="saveNpi()" [disabled]="saving || !npi" aria-label="Save NPI">
          <mat-icon *ngIf="!saving">save</mat-icon>
          <mat-icon *ngIf="saving">hourglass_empty</mat-icon>
          <span>{{ saving ? 'Saving…' : 'Save NPI' }}</span>
        </button>
      </div>

      <div class="validation" *ngIf="npiInvalid">
        <mat-icon>error_outline</mat-icon>
        <span>NPI must be exactly 10 digits.</span>
      </div>

      <div *ngIf="saveSuccess" class="success-banner">
        <mat-icon>check_circle</mat-icon>
        NPI saved successfully.
      </div>

      <div class="npi-meta">
        <span class="meta-item">
          <strong>Status:</strong>
          <span class="status-chip active">Verified</span>
        </span>
        <span class="meta-item">
          <strong>Last updated:</strong> {{ lastUpdated | date:'short' }}
        </span>
      </div>
    </mat-card>
  </div>
</div>