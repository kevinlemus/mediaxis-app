<div class="page-container">
  <header class="page-header">
    <div class="header-left">
      <h1>Audit Logs</h1>
      <p class="subtitle">Track user actions, system events, and claim workflow changes.</p>
    </div>
  </header>

  <!-- Filters -->
  <mat-card class="card filters-card">
    <div class="card-header">
      <h2>Filters</h2>
      <span class="descriptor">Narrow down logs by user or action.</span>
    </div>
    <form class="filters" #ff="ngForm">
      <div class="input-bar">
        <span class="input-icon"><mat-icon>person</mat-icon></span>
        <input matInput name="user" [(ngModel)]="filter.user" placeholder="Filter by user…" />
      </div>
      <div class="input-bar">
        <span class="input-icon"><mat-icon>list</mat-icon></span>
        <input matInput name="action" [(ngModel)]="filter.action" placeholder="Filter by action…" />
      </div>
      <button class="primary-btn" type="button">
        <mat-icon>filter_alt</mat-icon>
        Apply
      </button>
      <button class="action-btn" type="button" (click)="filter={user:'',action:'',dateFrom:'',dateTo:''}">
        Reset
      </button>
    </form>
  </mat-card>

  <!-- Timeline -->
  <mat-card class="card logs-card">
    <div class="logs-header">
      <h2>Timeline</h2>
      <div class="actions">
        <button class="action-btn" (click)="export('csv')" [disabled]="exporting">
          <mat-icon>table_view</mat-icon> CSV
        </button>
        <button class="action-btn" (click)="export('pdf')" [disabled]="exporting">
          <mat-icon>picture_as_pdf</mat-icon> PDF
        </button>
      </div>
    </div>

    <!-- Success banner -->
    <div *ngIf="exportSuccess" class="success-banner">
      <mat-icon>check_circle</mat-icon>
      Export completed successfully.
    </div>

    <table mat-table [dataSource]="filteredLogs()" class="logs-table">
      <ng-container matColumnDef="time">
        <th mat-header-cell *matHeaderCellDef>Time</th>
        <td mat-cell *matCellDef="let l">{{ l.time }}</td>
      </ng-container>
      <ng-container matColumnDef="user">
        <th mat-header-cell *matHeaderCellDef>User</th>
        <td mat-cell *matCellDef="let l">{{ l.user }}</td>
      </ng-container>
      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef>Action</th>
        <td mat-cell *matCellDef="let l">{{ l.action }}</td>
      </ng-container>
      <ng-container matColumnDef="entity">
        <th mat-header-cell *matHeaderCellDef>Entity</th>
        <td mat-cell *matCellDef="let l">{{ l.entity }}</td>
      </ng-container>
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let l">
          <span class="status"
                [class.success]="l.status==='Success'"
                [class.pending]="l.status==='Pending'"
                [class.queued]="l.status==='Queued'"
                [class.sent]="l.status==='Sent'">
            {{ l.status }}
          </span>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="['time','user','action','entity','status']"></tr>
      <tr mat-row *matRowDef="let row; columns: ['time','user','action','entity','status'];"></tr>
    </table>
  </mat-card>
</div>
